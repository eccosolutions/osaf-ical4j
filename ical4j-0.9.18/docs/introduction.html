<?xml version="1.0" encoding="ISO-8859-1"?>n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">n<html xmlns="http://www.w3.org/1999/xhtml">n<head>n    <title>iCal4j - Introduction</title>n    <link rel="stylesheet" href="css/default.css" type="text/css" />n    <link rel="alternate" href="http://sourceforge.net/export/rss2_projnews.php?group_id=107024&amp;rss_fulltext=1" type="application/rss+xml" title="iCal4j - News"/>n    <meta name="author" content="Ben Fortuna"/>n    <meta name="description" content="A Java library for reading and writing iCalendar data streams"/>n    <meta name="keywords" content="iCalendar, iCal, Parser, Java, Library, API"/>n</head>n<body>nn    <table>n        <thead>n            <tr>n                <td colspan="13" class="title">iCal4<span style="background:red">j</span></td>n            </tr>n        </thead>n        <tbody>n            <tr>n                <td><a href="index.html">Home</a></td>n                <td>|</td>n                <td><a href="introduction.html">Introduction</a></td>n                <td>|</td>n                <td><a href="api/index.html">Documentation</a></td>n                <td>|</td>n                <td><a href="http://sourceforge.net/news/?group_id=107024">News</a></td>n                <td>|</td>n                <td><a href="http://sourceforge.net/forum/?group_id=107024">Support</a></td>n                <td>|</td>n                <td><a href="http://sourceforge.net/project/showfiles.php?group_id=107024">Download</a></td>n                <td>|</td>n                <td style="width:100%"><a href="license.html">License</a></td>n            </tr>n        </tbody>n    </table>nn<div id="intro" class="content">n	<h2>Introduction <a href="#intro">&raquo;</a></h2>n	<p>n	    iCal4j may be used for modifying existing iCalendar data or creating new iCalendarn	    data from scratch. Here you will find a few examples indicating the recommended usagen	    of this library.n	</p>n</div>nn<div id="usage" class="content">n	<h2>Usage <a href="#usage">&raquo;</a></h2>n	<p>n	    Simply add the jar file (along withn	    the Commons Logging jar file) to your classpath.n	</p>n</div>nn<div id="examples" class="content">n	<h2>Examples <a href="#examples">&raquo;</a></h2>n	n	<h3>Parsing an iCalendar file</h3>n	<p>n		Support for parsing and building an iCalendar object model is providedn		by the <code>CalendarParser</code> and <code>ContentHandler</code>n		interfaces. You can provide your own implementations of eithern		of these, or just use the default implementations as provided byn		the <code>CalendarBuilder</code> class. Note that <code>CalendarBuilder</code>n		is not thread-safe, and as such it is good practice to construct a newn		instance for each data stream you wish to parse (see <em><a href="#timezones">Working with TimeZones</a></em>n		for further reasons).n	</p>n    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr><td><pre><code>nFileInputStream fin = new FileInputStream("mycalendar.ics");nnCalendarBuilder builder = new CalendarBuilder();nnCalendar calendar = builder.build(fin);n            </code></pre></td></tr>n        </tbody>n    </table>n	n	<h3>Iterating over a Calendar</h3>n	<p>n		The iCal4j API is designed to conform with the standard Java collectionsn		API as much as possible. As such, you will find that for searching andn		manipulating a calendar object model you can make use of familiar conceptsn		such as <code>List</code>s, <code>Iterator</code>s, etc.n	</p>n    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr><td><pre><code>nfor (Iterator i = calendar.getComponents().iterator(); i.hasNext();) {n    Component component = (Component) i.next();n    System.out.println("Component [" + component.getName() + "]");nn    for (Iterator j = component.getProperties().iterator; j.hasNext();) {n        Property property = (Property) j.next();n        System.out.println("Property [" + property.getName() + ", " + property.getValue() + "]");n    }n}n            </code></pre></td></tr>n        </tbody>n    </table>n	n	<h3>Creating a new calendar</h3>n	<p>n		Creating a new calendar is quite straight-forward, in that all you needn		to remember is that a <code>Calendar</code> contains a list ofn		<code>Properties</code> and <code>Components</code>. A calendar mustn		contain certain standard properties and at least one component to ben		valid. You can verify that a calendar is valid via the methodn		<code>Calendar.validate()</code>. All iCal4j objects also overriden		<code>Object.toString()</code>, so you can verify the resulting calendarn		data via this mechanism.n	</p>n    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr><td><pre><code>nCalendar calendar = new Calendar();ncalendar.getProperties().add(new ProdId("-//Ben Fortuna//iCal4j 1.0//EN"));ncalendar.getProperties().add(Version.VERSION_2_0);ncalendar.getProperties().add(CalScale.GREGORIAN);nn// Add events, etc..n	            </code></pre></td></tr>n            <tr>n                <th>n                    Output:n                </th>n            </tr>n            <tr><td><pre><code>nBEGIN:VCALENDARnPRODID:-//Ben Fortuna//iCal4j 1.0//ENnVERSION:2.0nCALSCALE:GREGORIANnEND:VCALENDARn            </code></pre></td></tr>n        </tbody>n    </table>n	n	<h3>Creating an event</h3>n	<p>n		One of the more commonly used components is a <code>VEvent</code>. To createn		a VEvent you can either set the date value and properties manually or you cann		make use of the convenience constructors to initialise standard values.n	</p>n    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr><td><pre><code>njava.util.Calendar cal = java.util.Calendar.getInstance();ncal.set(java.util.Calendar.MONTH, java.util.Calendar.DECEMBER);ncal.set(java.util.Calendar.DAY_OF_MONTH, 25);nnVEvent christmas = new VEvent(new Date(cal.getTime()), "Christmas Day");n// initialise as an all-day event..nchristmas.getProperties().getProperty(Property.DTSTART).getParameters().add(Value.DATE);n            </code></pre></td></tr>n            <tr>n                <th>n                    Output:n                </th>n            </tr>n            <tr><td><pre><code>nBEGIN:VEVENTnDTSTAMP:20050222T044240ZnDTSTART;VALUE=DATE:20051225nSUMMARY:Christmas DaynEND:VEVENTn            </code></pre></td></tr>n        </tbody>n    </table>n	n	<h3 id="timezones">Working with TimeZones</h3>n	<p>n		Complete timezone support is now provided by iCal4j, which follows thesen		basic principles:n	</p>n	n	<ul>n		<li>n			iCal4j includes its own set of timezone definitions, which aren			based on the defacto standard Olson timezone database. Whilstn			iCal4j's timezone identifiers may be identical to those providedn			by the Java API, there is no guarantee that the rules definingn			a timezone will match those used by a Java timezone.n		</li>n		<li>n			The default timezone for iCal4j is the same as the default Java timezone.n			This timezone is used where no iCal4j timezone is specified (i.e. floating time),n			and the relevant iCal4j object is not set as being in <em>UTC</em> time.n			<em>n			  Note that it is not recommended to use floating time values in externalisablen			  calendars (i.e. calendars you want to import into another program), as itn			  may lead to inconsistent handling of timezone information.n			</em>n		</li>n		<li>n			iCal4j timezones are accessible via the applicablen			<code>TimeZoneRegistry</code> implementation. When parsing existingn			iCalendar data you should obtain the appropriate <code>TimeZoneRegistry</code>n			via the <code>CalendarBuilder.getRegistry()</code> method aftern			calling <code>CalendarBuilder.build()</code>. In addition to then			default iCal4j timezone definitions this registry instance will alson			provide you access to any timezones defined in the parsed iCalendarn			data stream. If you are creating a new calendar object you shouldn			call <code>TimeZoneRegistryFactory.getInstance().createRegistry()</code>n			to construct a default registry instance.n		</li>n		<li>n			You can provide your own <code>TimeZoneRegistry</code> implementationn			by sub-classing the <code>TimeZoneRegistyFactory</code> class andn			specifying the following system property:n			<p>n			<em>net.fortuna.ical4j.timezone.registry=&lt;factory_class_name&gt;</em>n			</p>n			This may be useful if you want to read and/or store your timezone definitionsn			in a database.n		</li>n	</ul>nn    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr>n                <td>n                    <pre><code>nTimeZoneRegistry registry = TimeZoneRegistryFactory.getInstance().createRegistry();nTimeZone timezone = registry.getTimeZone("Australia/Melbourne");nnjava.util.Calendar cal = java.util.Calendar.getInstance(timezone);ncal.set(java.util.Calendar.YEAR, 2005);ncal.set(java.util.Calendar.MONTH, java.util.Calendar.NOVEMBER);ncal.set(java.util.Calendar.DAY_OF_MONTH, 1);ncal.set(java.util.Calendar.HOUR_OF_DAY, 15);ncal.clear(java.util.Calendar.MINUTE);ncal.clear(java.util.Calendar.SECOND);nnDateTime dt = new DateTime(cal.getTime());ndt.setTimeZone(timezone);nVEvent melbourneCup = new VEvent(dt, "Melbourne Cup");n            </code></pre></td></tr>n            <tr>n                <th>n                    Output:n                </th>n            </tr>n            <tr><td><pre><code>nBEGIN:VEVENTnDTSTAMP:20051105T094739ZnDTSTART;TZID=Australia/Melbourne:20051101T150000nSUMMARY:Melbourne CupnEND:VEVENTn                    </code></pre>n                </td>n            </tr>n        </tbody>n    </table>n	n	<h3>Saving an iCalendar file</h3>n	<p>n		When saving an iCalendar file iCal4j will automatically validate yourn		calendar object model to ensure it complies with then		<a href="http://www.faqs.org/rfcs/rfc2445.html">RFC2445</a> specification.n		If you would prefer not to validate your calendar data you can disable then		validation by calling <code>CalendarOutputter.setValidating(false)</code>.n	</p>n    <table style="border: 1px solid black; background: silver">n        <tbody>n            <tr><td><pre><code>nFileOutputStream fout = new FileOutputStream("mycalendar.ics");nnCalendarOutputter outputter = new CalendarOutputter();noutputter.output(calendar, fout);n            </code></pre></td></tr>n        </tbody>n    </table>n	<p>n		More examples may be found in the <a href="api/index.html">API Documentation</a>.n	</p>n</div>nn<div id="footer">n	<p>n	    Copyright 2005 &#169;n	    <a href="mailto:fortuna@users.sourceforge.net">Ben Fortun<span style="background:red">a</span></a>n    </p>n    <p>n	    <a href="http://validator.w3.org/check?uri=referer">n	      	<img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" />n	    </a>n    </p>n</div>n</body>n</html>